{% extends 'base.html' %}
{% block title %}민원 상세{% endblock %}
{% block content %}
<div class="card">
  <p class="eyebrow">Complaint #{{ complaint.id }}</p>
  <h2>{{ complaint.title }}</h2>
  <p><strong>카테고리:</strong> {{ complaint.category }}</p>
  <p><strong>상태:</strong> <span class="badge badge-{{ complaint.status }}">{{ complaint.status }}</span></p>
  <p class="small">접수일 {{ complaint.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
  <div class="card" style="margin-top: 12px; background: var(--surface-soft); box-shadow: none;">
    <p style="white-space: pre-wrap; margin: 0;">{{ complaint.content }}</p>
  </div>
</div>

{% if current_user.role == 'admin' %}
<div class="card" style="max-width: 520px;">
  <p class="eyebrow">Process</p>
  <h3>처리 상태 변경</h3>
  <form class="form" method="post">
    <label>상태
      <select name="status">
        <option value="received" {% if complaint.status == 'received' %}selected{% endif %}>received</option>
        <option value="in_review" {% if complaint.status == 'in_review' %}selected{% endif %}>in_review</option>
        <option value="resolved" {% if complaint.status == 'resolved' %}selected{% endif %}>resolved</option>
        <option value="rejected" {% if complaint.status == 'rejected' %}selected{% endif %}>rejected</option>
      </select>
    </label>
    <button type="submit">상태 변경</button>
  </form>
</div>
{% endif %}
{% endblock %}
