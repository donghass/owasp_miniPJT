{% extends 'base.html' %}
{% block title %}공지사항 | 공공 의료 민원 포털{% endblock %}
{% block content %}
<div class="card">
  <div class="split" style="margin-bottom: 6px;">
    <div>
      <p class="eyebrow">Notice Board</p>
      <h2>공지사항</h2>
    </div>
    {% if current_user.is_authenticated and current_user.role == 'admin' %}
      <a class="btn" href="{{ url_for('admin_notices') }}">
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"
             aria-hidden="true">
          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
        </svg>
        공지 관리
      </a>
    {% endif %}
  </div>

  <!-- 공지사항 카드 리스트 -->
  {% if notices %}
  <nav class="notice-list" aria-label="공지사항 목록">
    {% for notice in notices %}
    <a class="notice-item" href="{{ url_for('notices_detail', notice_id=notice.id) }}">
      <!-- 아이콘 -->
      <div class="notice-item-icon" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
        </svg>
      </div>

      <!-- 제목 + 날짜 -->
      <div class="notice-item-body">
        <span class="notice-item-title">{{ notice.title }}</span>
        <span class="notice-item-meta">
          {{ notice.created_at.strftime('%Y년 %m월 %d일') }}
        </span>
      </div>

      <!-- 상태 배지 + 화살표 -->
      <div class="notice-item-right">
        {% if notice.is_published %}
          <span class="badge badge-published">공개</span>
        {% else %}
          <span class="badge badge-private">비공개</span>
        {% endif %}
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"
             aria-hidden="true" style="color: var(--muted);">
          <polyline points="9 18 15 12 9 6"/>
        </svg>
      </div>
    </a>
    {% endfor %}
  </nav>
  {% else %}
  <!-- 빈 상태 UI -->
  <div class="empty-state" role="status">
    <div class="empty-state-icon" aria-hidden="true">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
           fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
      </svg>
    </div>
    <h4>등록된 공지사항이 없습니다</h4>
    <p>새로운 공지사항이 등록되면 이곳에 표시됩니다.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
