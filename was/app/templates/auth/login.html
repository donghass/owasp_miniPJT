{% extends 'base.html' %}
{% block title %}로그인 | 공공 의료 민원 포털{% endblock %}
{% block content %}
<div class="card auth-card">
  <div class="auth-header">
    <p class="eyebrow">Sign In</p>
    <h2>서비스 로그인</h2>
    <p class="small">공공 의료 민원 포털에 오신 것을 환영합니다.</p>
  </div>

  <form class="form" method="post" novalidate>
    <!-- 아이디 -->
    <div class="form-group">
      <label for="login-username">아이디</label>
      <div class="input-icon-wrap">
        <span class="field-icon" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
        </span>
        <input
          id="login-username"
          name="username"
          type="text"
          required
          autocomplete="username"
          placeholder="아이디를 입력하세요"
        >
      </div>
    </div>

    <!-- 비밀번호 -->
    <div class="form-group">
      <label for="login-password">비밀번호</label>
      <div class="password-wrap">
        <span class="field-icon" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
        </span>
        <input
          id="login-password"
          name="password"
          type="password"
          required
          autocomplete="current-password"
          placeholder="비밀번호를 입력하세요"
        >
        <button
          type="button"
          class="password-toggle"
          aria-label="비밀번호 표시/숨김"
          onclick="togglePassword('login-password', this)"
        >
          <!-- eye icon (기본: 숨김 상태) -->
          <svg id="icon-eye-login" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
        </button>
      </div>
    </div>

    <button type="submit" style="margin-top: 8px;">로그인</button>
  </form>

  <div class="auth-divider">
    계정이 없다면 <a href="{{ url_for('register') }}">회원가입</a>을 먼저 진행하세요.
  </div>
</div>

<script>
  function togglePassword(inputId, btn) {
    var input = document.getElementById(inputId);
    var isPassword = input.type === 'password';
    input.type = isPassword ? 'text' : 'password';
    btn.setAttribute('aria-label', isPassword ? '비밀번호 숨기기' : '비밀번호 표시');
    /* 아이콘 교체 */
    btn.innerHTML = isPassword
      ? '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/><path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/><line x1="1" y1="1" x2="23" y2="23"/></svg>'
      : '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>';
  }
</script>
{% endblock %}
