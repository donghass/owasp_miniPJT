{% extends 'base.html' %}
{% block title %}공지 관리{% endblock %}
{% block content %}
<div class="grid grid-2">
  <section class="card">
    <p class="eyebrow">Create Notice</p>
    <h2>공지 등록</h2>
    <form class="form" method="post">
      <label>제목<input name="title" required></label>
      <label>내용<textarea name="content" rows="9" required></textarea></label>
      <label><input type="checkbox" name="is_published" style="width: auto; margin-right: 6px;">바로 공개</label>
      <button type="submit">등록</button>
    </form>
  </section>

  <section class="card">
    <div class="split">
      <div>
        <p class="eyebrow">Manage</p>
        <h2>공지 목록</h2>
      </div>
      <a class="btn btn-subtle" href="{{ url_for('admin_dashboard') }}">대시보드</a>
    </div>
    <div class="table-wrap">
      <table class="table">
        <thead><tr><th>ID</th><th>제목</th><th>상태</th><th>액션</th></tr></thead>
        <tbody>
          {% for notice in notices %}
          <tr>
            <td>{{ notice.id }}</td>
            <td class="text-wrap">{{ notice.title }}</td>
            <td>{% if notice.is_published %}<span class="badge badge-published">공개</span>{% else %}<span class="badge badge-private">비공개</span>{% endif %}</td>
            <td>
              <form method="post" action="{{ url_for('admin_notice_publish', notice_id=notice.id) }}">
                <button type="submit">공개/비공개 전환</button>
              </form>
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="4" class="text-wrap">공지사항이 없습니다.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
</div>
{% endblock %}
